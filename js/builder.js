var canvas=new fabric.Canvas("canvas");Builder={lastLocation:20,current:function(){return canvas.getActiveObject()},location:function(){return this.lastLocation+=20},remove:function(){canvas.remove(this.current())},move:function(e,n){this.current().animate(e,n,{onChange:canvas.renderAll.bind(canvas),duration:5,easing:fabric.util.ease.easeOutBounce})},addPart:function(e){fabric.Image.fromURL(e,function(n){var a=Builder.location(),t=-1==e.indexOf("necks")?300:0;canvas.add(n.set({left:a,top:a+t}))})}},$(document).keydown(function(e){switch(log(e.which),e.which){case 37:Builder.move("left","-=1");break;case 38:Builder.move("top","-=1");break;case 39:Builder.move("left","+=1");break;case 40:Builder.move("top","+=1");break;case 8:Builder.remove();break;case 66:Builder.current().sendBackwards();break;default:return}e.preventDefault()}),$("img.body").on("click",function(){Builder.addPart(this.src)}),canvas.on("object:selected",function(){$("#settings").show()}),canvas.on("selection:cleared",function(){$("#settings").hide()}),$("#aBack").on("click",function(e){Builder.current().sendBackwards(),e.preventDefault()}),$("#aFront").on("click",function(e){log(e),Builder.current().bringForward(),e.preventDefault()}),log=function(){for(var e=0;e<arguments.length;e++)console.log(arguments[e])};